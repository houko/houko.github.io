---

date: 2016-06-17
title: linux权限详细解读
tags: 
  - linux
categories: 
  - linux
slug: LinuxChmod
---
话说我接触linux也有近2年的时候了,而且有自己的linux服务器。感觉对linux的操作熟练程度还可以，但是基本知识还是有待提高，linux权限这一块有必要啃一啃了。
<!--more-->
### 一、理论说明
Linux系统中的每个文件和目录都有访问许可权限，用它来确定谁可以通过何种方式对文件和目录进行访问和操作。
#### 1. 权限说明
文件或目录的访问权限分为只读，只写和可执行三种。
以文件为例，只读权限表示只允许读其内容，而禁止对其做任何的更改操作。
可执行权限表示允许将该文件作为一个程序执行。
文件被创建时，文件所有者自动拥有对该文件的读、写和可执行权限，以便于对文件的阅读和修改。
用户也可根据需要把访问权限设置为需要的任何组合。
#### 2. 用户组
有三种不同类型的用户可对文件或目录进行访问：
* 文件所有者，
* 同组用户
* 其他用户
所有者一般是文件的创建者。

所有者可以允许同组用户有权访问文件，还可以将文件的访问权限赋予系统中的其他用户。
在这种情况下，系统中每一位用户都能访问该用户拥有的文件或目录。
#### 3. 文件权限
每一文件或目录的访问权限都有三组，每组用三位表示，分别为
* 文件属主的读、写和执行权限；
* 与属主同组的用户的读、写和执行权限；
* 系统中其他用户的读、写和执行权限。
当用ls -l命令显示文件或目录的详细信息时，最左边的一列为文件的访问权限。

#### 4.实例分析

随意查看一个目录： `ll`

```
drwxr-xr-x   9 root root    4096 Jun 17 10:18 .
drwxr-xr-x   8 root root    4096 Jun 15 09:08 ..
-rw-r--r--   1 root root    1771 Jun 16 23:22 _config.yml
-rw-r--r--   1 root root 1201148 Jun 17 10:18 db.json
drwxr-xr-x   8 root root    4096 Jun 17 10:31 .git
-rw-r--r--   1 root root      55 Jun 15 09:09 .gitignore
drwxr-xr-x   2 root root    4096 Jun 15 09:09 .idea
drwxr-xr-x 411 root root   16384 Jun 15 09:12 node_modules
-rw-r--r--   1 root root     861 Jun 16 10:55 package.json
drwxr-xr-x  13 root root    4096 Jun 17 10:18 public
drwxr-xr-x   2 root root    4096 Jun 15 09:09 scaffolds
drwxr-xr-x   7 root root    4096 Jun 15 12:51 source
drwxr-xr-x   6 root root    4096 Jun 15 12:51 themes

```

解读：
```
  注意这里共有10个位置,10个位置又可以分为4个部分。
  四个部分分别为 1.类型 2.属主权限 2.同组用户权限 3 其他用户权限
  第一个字符指定了文件类型。
  r代表只读，w代表写，x代表可执行，横线代表空。
  在通常意义上，一个目录也是一个文件。
  如果第一个字符是横线，表示是一个非目录的文件。
  如果是d，表示是一个目录。
```

单个实例

```
-rw-r--r--
```

详细解读(如果没有看懂建议回头看看理论说明1-3)

![](https://image.xiaomo.info/linux/chmod.png)


### 二、命令使用说明

#### 1.格式(参数设定)

`chmod ［who］ ［+ | - | =］ ［mode］ 文件名¼`


命令解读：


操作对象who可是下述字母中的任一个或者它们的组合：

```
　　u 表示“用户（user）”，即文件或目录的所有者。

　　g 表示“同组（group）用户”，即与文件属主有相同组ID的所有用户。

　　o 表示“其他（others）用户”。

　　a 表示“所有（all）用户”。它是系统默认值。
```

　　操作符号可以是：

```
　　+ 添加某个权限。

　　- 取消某个权限。

　　= 赋予给定权限并取消其他所有权限（如果有的话）。

```

　　设置mode所表示的权限可用下述字母的任意组合：

```
　　r 可读。

　　w 可写。

　　x 可执行。

　　X 只有目标文件对某些用户是可执行的或该目标文件是目录时才追加x 属性。

　　s 在文件执行时把进程的属主或组ID置为该文件的文件属主。方式“u＋s”设置文件的用户ID位，“g＋s”设置组ID位。

　　t 保存程序的文本到交换设备上。

　　u 与文件属主拥有一样的权限。

　　g 与和文件属主同组的用户拥有一样的权限。

　　o 与其他用户拥有一样的权限。

　　文件名：以空格分开的要改变权限的文件列表，支持通配符。

　　在一个命令行中可给出多个权限方式，其间用逗号隔开。例如：chmod g+r，o+r example

　　使同组和其他用户对文件example 有读权限。

```


#### 2.权限设置(数字)

我们必须首先了解用数字表示的属性的含义：

```
0表示没有权限，
1表示可执行权限，
2表示可写权限，
4表示可读权限，
然后将其相加。所
以数字属性的格式应为3个从0到7的八进制数，
其顺序是（u）（g）（o）。
```

### 三、其他命令

#### 1. `　chgrp`命令

功能：改变文件或目录所属的组。

语法：`chgrp ［选项］ group filename¼`

该命令改变指定指定文件所属的用户组。其中`group`可以是用户组ID，也可以是`/etc/group`文件中用户组的组名。文件名是以空格分开的要改变属组的文件列表，支持通配符。如果用户不是该文件的属主或超级用户，则不能改变该文件的组。

该命令的各选项含义为：

```
  - R 递归式地改变指定目录及其下的所有子目录和文件的属组。
```

　　例1：`$ chgrp - R book /opt/local /book`

　　改变``/opt/local` `/book/`及其子目录下的所有文件的属组为`book`。

#### 2. `chown`命令

　　功能：更改某个文件或目录的属主和属组。这个命令也很常用。例如root用户把自己的一个文件拷贝给用户xu，为了让用户xu能够存取这个文件，root用户应该把这个文件的属主设为xu，否则，用户xu无法存取这个文件。

　　语法：`chown ［选项］ 用户或组 文件`

　　说明：`chown`将指定文件的拥有者改为指定的用户或组。用户可以是用户名或用户ID。组可以是组名或组ID。文件是以空格分开的要改变权限的文件列表，支持通配符。

　　该命令的各选项含义如下：

```
　　- R 递归式地改变指定目录及其下的所有子目录和文件的拥有者。
　　- v 显示chown命令所做的工作。
```

　　例1：把文件`shiyan.c`的所有者改为`wang`。

　　$ `chown wang shiyan.c`

　　例2：把目录/his及其下的所有文件和子目录的属主改成`wang`，属组改成`users`。

　　$ `chown - R wang.users /his`
