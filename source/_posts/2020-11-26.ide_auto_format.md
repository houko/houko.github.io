---
author: 小莫
date: 2020-11-26
title: 使用IDEA保存时自动格式化代码配置
tags:
- IDEA
category: java
permalink: autoFormatOnSvae
---

公司的Java项目在提交代码时会自动执行CI。为了统一代码风格，CI中配置了使用google-java-format来检查代码格式，所以IDEA默认的格式化风格会和google的风格不一样，最终提交代码时需要执行 `./gradlew :spotlessApply`来再次format,经常会遇到在提交代码时会忘记执行脚本会导致CI构建失败。所以研究了一下如何让IDEA应用google的风格自动进行格式化。

<!-- more -->

## 安装google-java-format

preferences -> plugins -> Browse repositories…
搜索google-java-format安装插件

<img src="https://image.xiaomo.info//blog/image-20201126110557847.png" alt="image-20201126110557847" style="zoom: 25%;" />

### 启用google-java-format（AOSP）

<img src="https://image.xiaomo.info//blog/image-20201126110636172.png" alt="image-20201126110636172" style="zoom:25%;" />

## 安装save actions

preferences -> plugins -> Browse repositories…
安装save actions
<img src="https://image.xiaomo.info//blog/image-20201126110724471.png" alt="image-20201126110724471" style="zoom:25%;" />

### 启用save actions

保存时自动格式化

![image-20201126110813221](https://image.xiaomo.info//blog/image-20201126110813221.png)



### 其他配置

关于formatting、build action和quick fix的部分根据需要开启